<div class="filters-container">
  <div class="filters-header">
    <h3 class="filters-title">Filtros</h3>
    <button type="button" class="collapse-button" (click)="toggleCollapse()">
      <span class="material-icons">
        {{ collapsed ? 'expand_more' : 'expand_less' }}
      </span>
    </button>
  </div>
  
  <div class="filters-body" [class.collapsed]="collapsed">
    <div class="filters-grid">
      @for (filter of filters; track filter.key) {
        <div class="filter-item">
          <label [for]="'filter-' + filter.key" class="filter-label">{{ filter.label }}</label>
          
          @switch (filter.type) {
            @case ('text') {
              <input 
                type="text" 
                [id]="'filter-' + filter.key" 
                class="filter-input"
                [placeholder]="filter.placeholder || ''"
                [(ngModel)]="filterValues[filter.key]"
                (ngModelChange)="onFilterChange(filter.key, $event)"
              />
            }
            @case ('number') {
              <input 
                type="number" 
                [id]="'filter-' + filter.key" 
                class="filter-input"
                [placeholder]="filter.placeholder || ''"
                [(ngModel)]="filterValues[filter.key]"
                (ngModelChange)="onFilterChange(filter.key, $event)"
              />
            }
            @case ('date') {
              <input 
                type="date" 
                [id]="'filter-' + filter.key" 
                class="filter-input"
                [(ngModel)]="filterValues[filter.key]"
                (ngModelChange)="onFilterChange(filter.key, $event)"
              />
            }
            @case ('select') {
              <select 
                [id]="'filter-' + filter.key" 
                class="filter-select"
                [(ngModel)]="filterValues[filter.key]"
                (ngModelChange)="onFilterChange(filter.key, $event)"
              >
                <option value="">{{ filter.placeholder || 'Seleccionar...' }}</option>
                @for (option of filter.options; track option.value) {
                  <option [value]="option.value">{{ option.label }}</option>
                }
              </select>
            }
          }
        </div>
      }
    </div>
    
    <div class="filters-actions">
      @if (showClearButton) {
        <button type="button" class="clear-button" (click)="clearFilters()">
          Limpiar filtros
        </button>
      }
      
      @if (showApplyButton && !autoApply) {
        <button type="button" class="apply-button" (click)="applyFilters()">
          Aplicar filtros
        </button>
      }
    </div>
  </div>
</div>