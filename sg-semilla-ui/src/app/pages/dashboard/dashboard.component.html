<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p *ngIf="currentUser">Bienvenido, {{ currentUser.firstName }} {{ currentUser.lastName }}</p>
  </div>

  <!-- Pantalla de carga -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner-large"></div>
    <p>Cargando datos del dashboard...</p>
  </div>

  <!-- Contenido principal -->
  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- Tarjetas de estadísticas -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon usuarios-icon">
          <i class="fas fa-users"></i>
        </div>
        <div class="stat-info">
          <h3>Usuarios</h3>
          <p class="stat-value">{{ stats.usuarios.total | number }}</p>
          <p class="stat-change" [class.positive]="stats.usuarios.incremento > 0" [class.negative]="stats.usuarios.incremento < 0">
            <i class="fas" [class.fa-arrow-up]="stats.usuarios.incremento > 0" [class.fa-arrow-down]="stats.usuarios.incremento < 0"></i>
            {{ stats.usuarios.incremento }}%
          </p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon tareas-icon">
          <i class="fas fa-tasks"></i>
        </div>
        <div class="stat-info">
          <h3>Tareas</h3>
          <p class="stat-value">{{ stats.tareas.total | number }}</p>
          <p class="stat-change" [class.positive]="stats.tareas.incremento > 0" [class.negative]="stats.tareas.incremento < 0">
            <i class="fas" [class.fa-arrow-up]="stats.tareas.incremento > 0" [class.fa-arrow-down]="stats.tareas.incremento < 0"></i>
            {{ stats.tareas.incremento }}%
          </p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon completadas-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-info">
          <h3>Completadas</h3>
          <p class="stat-value">{{ stats.completadas.total | number }}</p>
          <p class="stat-secondary">{{ stats.completadas.porcentaje }}% del total</p>
        </div>
      </div>
    </div>

    <!-- Contenido principal en dos columnas -->
    <div class="main-grid">
      <!-- Columna izquierda -->
      <div class="left-column">
        <!-- Sección de accesos rápidos -->
        <div class="card">
          <div class="card-header">
            <h2>Accesos Rápidos</h2>
          </div>
          <div class="card-body">
            <div class="quick-links">
              <a routerLink="/users" class="quick-link">
                <i class="fas fa-users"></i>
                <span>Gestión de Usuarios</span>
              </a>
              <a routerLink="/todos" class="quick-link">
                <i class="fas fa-tasks"></i>
                <span>Gestión de Tareas</span>
              </a>
              <a routerLink="/profile" class="quick-link">
                <i class="fas fa-user-circle"></i>
                <span>Mi Perfil</span>
              </a>
              <a routerLink="/table-demo" class="quick-link">
                <i class="fas fa-table"></i>
                <span>Tablas</span>
              </a>
            </div>
          </div>
        </div>

        <!-- Sección de tareas pendientes -->
        <div class="card">
          <div class="card-header">
            <h2>Mis Tareas Pendientes</h2>
            <a routerLink="/todos" class="view-all">Ver todas</a>
          </div>
          <div class="card-body">
            <div *ngIf="tareasPendientes.length === 0" class="empty-state">
              <i class="fas fa-check-circle"></i>
              <p>No tienes tareas pendientes</p>
            </div>
            <ul *ngIf="tareasPendientes.length > 0" class="tasks-list">
              <li *ngFor="let tarea of tareasPendientes" class="task-item">
                <div class="task-info">
                  <h4>{{ tarea.titulo }}</h4>
                  <div class="task-meta">
                    <span [class]="getClasePrioridad(tarea.prioridad)" class="priority-badge">{{ tarea.prioridad }}</span>
                    <span class="due-date">Vence: {{ tarea.fechaLimite | date:'dd/MM/yyyy' }}</span>
                  </div>
                </div>
                <a routerLink="/todos" [queryParams]="{id: tarea.id}" class="task-action">
                  <i class="fas fa-arrow-right"></i>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Columna derecha -->
      <div class="right-column">
        <!-- Sección de actividad reciente -->
        <div class="card">
          <div class="card-header">
            <h2>Actividad Reciente</h2>
          </div>
          <div class="card-body">
            <div *ngIf="actividades.length === 0" class="empty-state">
              <i class="fas fa-history"></i>
              <p>No hay actividad reciente</p>
            </div>
            <ul *ngIf="actividades.length > 0" class="activity-list">
              <li *ngFor="let actividad of actividades" class="activity-item">
                <div [class]="getClaseActividad(actividad.tipo)" class="activity-icon">
                  <i class="fas fa-{{ actividad.icono }}"></i>
                </div>
                <div class="activity-content">
                  <p class="activity-message">{{ actividad.mensaje }}</p>
                  <span class="activity-time">{{ formatearFechaRelativa(actividad.fecha) }}</span>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <!-- Sección de componentes UI -->
        <div class="card">
          <div class="card-header">
            <h2>Componentes UI</h2>
          </div>
          <div class="card-body">
            <div class="ui-components-grid">
              <a routerLink="/button-demo" class="ui-component-card">
                <i class="fas fa-square"></i>
                <span>Botones</span>
              </a>
              <a routerLink="/card-demo" class="ui-component-card">
                <i class="fas fa-credit-card"></i>
                <span>Tarjetas</span>
              </a>
              <a routerLink="/form-demo" class="ui-component-card">
                <i class="fas fa-wpforms"></i>
                <span>Formularios</span>
              </a>
              <a routerLink="/chart-demo" class="ui-component-card">
                <i class="fas fa-chart-pie"></i>
                <span>Gráficas</span>
              </a>
              <a routerLink="/table-demo" class="ui-component-card">
                <i class="fas fa-table"></i>
                <span>Tablas</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>